# GitHub Rulesets — Merge Group required checks\n\nThis repository includes a GitHub Ruleset template that enforces Merge Group CI checks on protected branches. The ruleset blocks merges until the queue-produced checks pass.\n\n- File: `tooling/rulesets/merge-group-required.json`\n- Branch targets: `refs/heads/main`, `refs/heads/dev`\n- Required contexts:\n  - `Merge Group CI / typecheck`\n  - `Merge Group CI / build`\n  - `Merge Group CI / test`\n\n> Note: This template relies on GitHub Merge Queue producing the above contexts. Ensure your repo is configured to run CI for merge groups.\n\n## Prerequisites\n\n- Admin access on the target repository\n- GitHub CLI `gh` authenticated with `GH_TOKEN` or `GITHUB_TOKEN` (repo admin scope)\n- `jq` installed (for JSON processing)\n\n## Apply or update the ruleset\n\nFrom the repo root:\n\n"""bash\n# Create or patch the ruleset on the current repo\nbash scripts/configure-rulesets.sh\n\n# Or target a different repo explicitly\nREPO=ds0857/x-skynet bash scripts/configure-rulesets.sh\n\n# Use a different ruleset JSON if needed\nbash scripts/configure-rulesets.sh path/to/your.json\n"""\n\nThe script:\n- Reads the `name` field from the JSON\n- Checks for an existing ruleset with that name\n- Patches it if found, otherwise creates a new ruleset\n\n## Verifying\n\n- Web UI: Settings → Rules → Rulesets → find the ruleset named in your JSON\n- CLI:\n\n"""bash\n# List rulesets\nREPO=owner/name gh api repos//rulesets | jq '.[] | {id, name, enforcement, target}'\n"""\n\n## Modifying or disabling\n\n- Edit the JSON and re-run the script to update\n- To disable temporarily, change `enforcement` to `disabled` in JSON and patch\n- To delete a ruleset entirely:\n\n"""bash\n# Find the ID first, then\ngh api repos//rulesets/<id> -X DELETE\n"""\n\n## Notes\n\n- These required checks only apply to the branches included in `conditions.ref_name.include`\n- If your CI contexts differ, update the `required_check` entries accordingly\n- Merge Queue must be enabled for the repository, and your workflow should run in the merge group context\n
